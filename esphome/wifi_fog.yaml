esphome:
  name: wifi-fog
  friendly_name: WiFi Fog Machine

esp32:
  board: esp32-s3-devkitc-1   # Change to match your board (esp32-c6-devkitc-1, etc.)

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

logger:
  level: WARN

web_server:
  port: 80   # optional - view status in browser at the device IP

http_request:
  timeout: 2s

# ================== NOISE GENERATION ==================
interval:
  # Frequent light requests (core fog)
  - interval: 450ms
    then:
      - http_request.get:
          url: "http://1.1.1.1"
          headers:
            User-Agent: "ESP32-WiFiFog/1.0"
      - delay: 150ms

  # Occasional varied requests (harder for sensing algorithms to filter)
  - interval: 2s
    then:
      - http_request.get:
          url: "https://www.cloudflare.com/cdn-cgi/trace"
          headers:
            User-Agent: "ESP32-WiFiFog/1.0"

  - interval: 5s
    then:
      - http_request.get:
          url: "http://connectivitycheck.gstatic.com/generate_204"
          headers:
            User-Agent: "ESP32-WiFiFog/1.0"

# Switch to turn fog on/off from Home Assistant
switch:
  - platform: template
    name: "WiFi Fog"
    optimistic: true
    restore_mode: RESTORE_DEFAULT_ON
    turn_on_action:
      - logger.log: "Fog machine ON"
    turn_off_action:
      - logger.log: "Fog machine OFF"
